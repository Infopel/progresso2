var app=angular.module("appSMP",["ngResource"]);app.controller("timeEntrysController",["$scope","$http","$routeParams","$sce",function(e,t,a,i){e.actionSeleced=null,e.actionID=null,e.triggerSelected=null,e.triggerID=null,e.relationID=null,e.action=function(t){switch(t){case"Notify":e.actionSeleced="Notificar por email";break;case"NewAct":e.actionSeleced="Criar Actividade"}},e.trigger=function(t){switch(t){case"done":e.triggerSelected="Concluido",e.triggerID=103;break;case"B5days":e.triggerSelected="5 dias antes do termino",e.triggerID=105;break;case"newPRO":e.triggerSelected="Nova Projecto criado",e.triggerID=107;break;case"newACT":e.triggerSelected="Novo Actividade criada",e.triggerID=109}},e.relatedTo=function(t){switch(t){case"PE":e.selectRelation="Plano Estrategico";break;case"PRO":e.selectRelation="Projectos";break;case"ACT":e.selectRelation="Activiadaes"}},e.selectedPrograma=null,e.selectedProgramaID=null,e.selectPrograma=function(a){e.selectedPrograma=a.programa,e.selectedProgramaID=a.id_programa,$url="system/api/utilitesControler.php/?getAct=0&id="+a.id_programa,t.get($url).success(function(t){e.responseAct=t}).error(function(t){console.log(t),e.response="The server did not get the data from database! Contact you webmaster. #edilsonhmberto@gmail.com"})},e.selectedActividade=null,e.selectedActividadeID=null,e.selectActividade=function(t){e.selectedActividade=t.subject,e.selectedActividadeID=t.id},e.objBeneficiarios=[],e.objMaterial=[],e.selectedBenf=null,e.selectedBenfIndex=null,e.selectedMaterial=null,e.selectedMaterialIndex=null,e.selectBenf=function(t,a){e.selectedBenf=t,e.selectedBenfIndex=a},e.selectMaterial=function(t,a){e.selectedMaterial=t,e.selectedMaterialIndex=a},e.addBeneficiarios=function(t,a){e.newObjBenf={var:t,realizado:a},this.objBeneficiarios.push(e.newObjBenf),this.responseVars.benf_vars.splice(this.selectedBenfIndex,1),e.selectedBenf=null,this.benValue=null},e.addMateriais=function(t,a){e.newObjMaterail={var:t,realizado:a},this.objMaterial.push(e.newObjMaterail),this.responseVars.material_vars.splice(this.selectedMaterialIndex,1),e.selectedMaterial=null,this.matValue=null},e.delBenf=function(t,a){console.log(t),this.objBeneficiarios.splice(a,1),e.newObjBenf={var:t},this.responseVars.benf_vars.push(e.newObjBenf)},e.delMaterial=function(t,a){console.log(t),this.objMaterial.splice(a,1),e.newObjMaterial={var:t},this.responseVars.material_vars.push(e.newObjMaterial)},e.gravarReal=function(a,i,s,r){if(console.log("Benf: "+this.objBeneficiarios[0]+"\nMaterial: "+this.objMaterial),null!=this.selectedActividadeID&&null!=this.selectedProgramaID){var l=$.param({actividade:this.selectedActividadeID,programa:this.selectedProgramaID,benf:JSON.stringify(this.objBeneficiarios),material:JSON.stringify(this.objMaterial),dueDate:s,time:r,comment:a,vGasto:i}),n={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}};t.post("system/api/utilitesControler.php/?store=0",l,n).success(function(t,a,i,s){e.storeResponse=t,this.dueDate=null,this.time=null,this.comment=null,this.vGasto=null,this.objBeneficiarios=[],this.objMaterial=[],e.dueDate=null,e.time=null,e.comment=null,e.vGasto=null,alert(t.message)}).error(function(t,a,i,s){e.ResponseDetails="Data: "+t+"<hr />status: "+a+"<hr />headers: "+i+"<hr />config: "+s})}else alert("Selecione O programa e Actividade\n Preencha todos os campos!")},$url="system/api/utilitesControler.php/?getVars=0",t.get($url).success(function(t){e.responseVars=t}).error(function(t){console.log(t),e.response="The server did not get the data from database! Contact you webmaster. #edilsonhmberto@gmail.com"})}]);